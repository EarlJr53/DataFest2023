---
title: "data"
output: html_document
date: "2023-04-14"
---

```{r}
library(tidyverse)
library(ggplot2)
```

```{r}
# Glimpse data
attorneys_data <- read_csv("data/DataFest_2023_Data/attorneys.csv")

glimpse(attorneys_data)

attorneytimeentries <- read_csv("data/DataFest_2023_Data/attorneytimeentries.csv")

glimpse(attorneytimeentries)

categories <- read_csv("data/DataFest_2023_Data/categories.csv")

glimpse(categories)

clients <- read_csv("data/DataFest_2023_Data/clients.csv")

glimpse(clients)

questionposts <- read_csv("data/DataFest_2023_Data/questionposts.csv")

glimpse(questionposts)

questions <- read_csv("data/DataFest_2023_Data/questions.csv")

glimpse(questions)

statesites <- read_csv("data/DataFest_2023_Data/statesites.csv")

glimpse(statesites)

subcategories <- read_csv("data/DataFest_2023_Data/statesites.csv")

glimpse(subcategories)



```

```{r}
attorneys_data%>% 
  group_by(StateAbbr) %>% 
  count() %>% 
  arrange(desc(n))
  
```

```{r}
num_null <- 
  questions %>% 
    filter(TakenByAttorneyUno == "NULL") %>% 
    nrow()

# questions %>% 
#     mutate(is_null = num_null/nrow()) %>% 
#     select(is_null, everything())

questions %>%
  group_by(StateAbbr) %>%
  mutate(
    is_null = 1 * (TakenByAttorneyUno == "NULL"),
  ) %>%
  count(is_null) %>%
  pivot_wider(
    names_from = "is_null",
    names_prefix = "null",
    values_from = "n"
  ) %>%
  mutate(
    null_percent = null1 / (null0 + null1)
  ) %>% 
  arrange(desc(null_percent))
```
```{r}
  questions %>% 
    group_by(Category) %>%
  mutate(
    is_null = 1 * (TakenByAttorneyUno == "NULL"),
  ) %>%
  count(is_null) %>%
  pivot_wider(
    names_from = "is_null",
    names_prefix = "null",
    values_from = "n"
  ) %>%
  mutate(
    null_percent = null1 / (null0 + null1)
  ) %>% 
  select(null_percent, everything())
```